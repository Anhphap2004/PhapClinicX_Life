@model DoctorProfile



<div class="container py-5">
    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show text-center mb-4" role="alert">
            <i class="bi bi-check-circle-fill me-2 fs-4"></i>
            <strong>Thành công!</strong> @TempData["SuccessMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    }

    <div class="doctor-card shadow-lg bg-white p-4">
        <div class="row g-4">
            <!-- Thông tin bác sĩ -->
            <div class="col-md-4">
                <div class="text-center doctor-info">
                    <img src="~/assets/img/team/@Model.Image" alt="Bác sĩ @Model.Fullname"
                         class="rounded-circle img-fluid doctor-image">
                    <h4 class="doctor-name">@Model.Fullname</h4>
                    <div class="mt-3">
                        <span class="badge bg-primary rounded-pill px-3 py-2 mb-2">
                            <i class="bi bi-person-badge me-1"></i> Bác sĩ chuyên khoa
                        </span>
                    </div>
                    <p class="text-muted mt-2">
                        <i class="bi bi-award-fill text-warning me-1"></i>
                        <strong>@Model.Experience năm kinh nghiệm</strong>
                    </p>
                    <div class="mt-3 p-3 bg-white rounded shadow-sm">
                        <p class="mb-2">
                            <i class="bi bi-bandaid-fill text-success me-2"></i>
                            <strong>Chuyên khoa:</strong> @Model.Specialization
                        </p>
                        <p class="mb-2">
                            <i class="bi bi-hospital-fill text-danger me-2"></i>
                            <strong>@Model.PhongKham?.TenPhongKham</strong>
                        </p>
                        <p class="mb-0">
                            <i class="bi bi-geo-alt-fill text-warning me-2"></i>
                            @Model.PhongKham?.DiaChi
                        </p>
                    </div>
                </div>
            </div>

            <!-- Giới thiệu -->
            <div class="col-md-8">
                <div class="intro-card p-4">
                    <h5 class="intro-title"><i class="bi bi-info-circle-fill me-2"></i>Giới thiệu</h5>
                    <div class="intro-content">
                        @Html.Raw(Model.Introduce)
                    </div>

                    <!-- Hỗ trợ đặt khám -->
                    <div class="support-alert mt-4 text-center">
                        <div class="d-flex align-items-center justify-content-center">
                            <i class="bi bi-telephone-fill me-2 fs-4"></i>
                            <p class="mb-0 fs-5 fw-bold">Hỗ trợ đặt khám: 1900-2805</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Form đặt lịch khám -->
        <div class="booking-form mt-4">
            <div class="booking-header text-center">
                <h4 class="mb-0"><i class="bi bi-calendar-check me-2"></i>ĐẶT LỊCH KHÁM</h4>
            </div>
            <div class="booking-body">
                <form asp-controller="Booking" asp-action="DatLich" method="post" class="row g-4">
                    <input type="hidden" name="DoctorId" value="@Model.DoctorId" />

                    <div class="col-md-6">
                        <label for="PatientName" class="form-label">
                            <i class="bi bi-person-fill me-1 text-primary"></i> Họ và tên:
                        </label>
                        <div class="input-group">
                            <span class="input-group-text bg-primary text-white">
                                <i class="bi bi-person"></i>
                            </span>
                            <input type="text" class="form-control" id="PatientName" name="PatientName"
                                   placeholder="Nhập họ và tên của bạn" required>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <label for="PhoneNumber" class="form-label">
                            <i class="bi bi-telephone-fill me-1 text-primary"></i> Số điện thoại:
                        </label>
                        <div class="input-group">
                            <span class="input-group-text bg-primary text-white">
                                <i class="bi bi-telephone"></i>
                            </span>
                            <input type="text" class="form-control" id="PhoneNumber" name="PhoneNumber"
                                   placeholder="Nhập số điện thoại của bạn" required>
                        </div>
                    </div>

                    <div class="col-md-12">
                        <label for="SelectedSlot" class="form-label">
                            <i class="bi bi-calendar-event-fill me-1 text-primary"></i> Chọn ngày giờ khám:
                        </label>
                        <div class="input-group">
                            <span class="input-group-text bg-primary text-white">
                                <i class="bi bi-calendar-check"></i>
                            </span>
                            <select class="form-select" id="SelectedSlot" name="SelectedSlot">
                                @{
                                    var slots = ViewBag.AvailableSlots as List<DateTime> ?? new List<DateTime>();
                                }
                                @if (slots.Any())
                                {
                                    foreach (var slot in slots)
                                    {
                                        <option value="@slot.ToString("yyyy-MM-dd HH:mm")">
                                            @slot.ToString("dd/MM/yyyy HH:mm")
                                        </option>
                                    }
                                }
                                else
                                {
                                    <option disabled>Không có lịch trống</option>
                                }
                            </select>
                        </div>
                    </div>

                    <div class="col-12 text-center mt-4">
                        <button type="submit" class="btn btn-primary btn-book btn-lg px-5 py-3">
                            <i class="bi bi-calendar-check-fill me-2"></i> ĐẶT LỊCH NGAY
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
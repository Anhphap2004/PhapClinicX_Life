<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>PhapHealth - Clinic X Hospital</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <link rel="icon" type="image/x-icon" style="border-radius: 50%" href="~/assets/img/logo/phaplife.ico">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000" rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Libraries Stylesheet -->
    <link rel="stylesheet" href="~/assets/lib/animate/animate.min.css" />
    <link href="~/assets/lib/lightbox/css/lightbox.min.css" rel="stylesheet">
    <link href="~/assets/lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    @* <link href="https://cdn.leanhduc.pro.vn/utilities/multi-color-star-effects/style.css" rel="stylesheet" /> *@
    <!-- Customized Bootstrap Stylesheet -->
    <link href="~/assets/css/bootstrap.min.css" rel="stylesheet">

    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">


    <!-- Template Stylesheet -->
    <link href="~/assets/css/style.css" rel="stylesheet">
</head>

<body>
    <!-- Spinner Start -->
        <div class="spinner-border text-danger" style="width: 3rem; height: 3rem;" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
    <!-- Spinner End -->
  
    <!-- Navbar & Hero Start -->
    @await Component.InvokeAsync("MenuTop")
    <!-- Navbar & Hero End -->
    <!-- Modal Search Start -->
    <div class="modal fade" id="searchModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-fullscreen">
            <div class="modal-content rounded-0">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Search by keyword</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body d-flex align-items-center bg-danger">
                    <div class="input-group w-75 mx-auto d-flex">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Search End -->
    @RenderBody();

    <!-- Footer Start -->
    <div class="container-fluid footer py-5 wow fadeIn" data-wow-delay="0.2s">
        <div class="container py-5">
            <div class="row g-5">
                <div class="col-xl-9">
                    <div class="mb-5">
                        <div class="row g-4">
                            <div class="col-md-6 col-lg-6 col-xl-5">
                                <div class="footer-item">
                                    <a href="index.html" class="p-0">
                                        <h3 class="text-white"><i class="fas fa-clinic-medical me-3"></i>PhápLife</h3>
                                        <!-- <img src="~/assets/img/logo.png" alt="Logo"> -->z
                                    </a>
                                    <div class="footer-btn d-flex">
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 col-lg-6 col-xl-3">
                                <div class="footer-item">
                                    <h4 class="text-white mb-4">Thông Tin Hữu Ích</h4>
                                    <a href="#"><i class="fas fa-angle-right me-2"></i> Giới Thiệu</a>
                                    <a href="#"><i class="fas fa-angle-right me-2"></i> Dịch Vụ Khám Bệnh</a>
                                    <a href="#"><i class="fas fa-angle-right me-2"></i> Đội Ngũ Bác Sĩ</a>
                                    <a href="#"><i class="fas fa-angle-right me-2"></i> Hướng Dẫn Đặt Lịch</a>
                                    <a href="#"><i class="fas fa-angle-right me-2"></i> Câu Hỏi Thường Gặp</a>
                                    <a href="#"><i class="fas fa-angle-right me-2"></i> Liên Hệ</a>
                                </div>
                            </div>

                            <div class="col-md-6 col-lg-6 col-xl-4">
                                <div class="footer-item">
                                    <h4 class="mb-4 text-white">Instagram</h4>
                                    <div class="row g-3">
                                        <div class="col-4">
                                            <div class="footer-instagram rounded">
                                                <div class="footer-search-icon">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="footer-instagram rounded">
                                                <div class="footer-search-icon">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="footer-instagram rounded">
                                                <div class="footer-search-icon">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="footer-instagram rounded">
                                                <div class="footer-search-icon">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="footer-instagram rounded">
                                                <div class="footer-search-icon">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="footer-instagram rounded">
                                                <div class="footer-search-icon">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pt-5" style="border-top: 1px solid rgba(255, 255, 255, 0.08);">
                        <div class="row g-0">
                            <div class="col-12">
                                <div class="row g-4">
                                    <div class="col-lg-6 col-xl-4">
                                        <div class="d-flex">
                                            <div class="btn-xl-square bg-danger text-white rounded p-4 me-4">
                                                <i class="fas fa-map-marker-alt fa-2x"></i>
                                            </div>
                                            <div>
                                                <h4 class="text-white">Địa Chỉ</h4>
                                                <p class="mb-0">309 TP.Vinh - Nghệ An</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-xl-4">
                                        <div class="d-flex">
                                            <div class="btn-xl-square bg-danger text-white rounded p-4 me-4">
                                                <i class="fas fa-envelope fa-2x"></i>
                                            </div>
                                            <div>
                                                <h4 class="text-white">Email</h4>
                                                <p class="mb-0">phaplife@gmail.com</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-xl-4">
                                        <div class="d-flex">
                                            <div class="btn-xl-square bg-danger text-white rounded p-4 me-4">
                                                <i class="fa fa-phone-alt fa-2x"></i>
                                            </div>
                                            <div>
                                                <h4 class="text-white">Số Điện Thoại</h4>
                                                <p class="mb-0">(+033) 957 3127</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-xl-3">
                    <div class="footer-item">
                        <h4 class="text-white mb-4">Bản Tin</h4>
                        <div class="position-relative rounded-pill mb-4">
                        </div>
                        <div class="d-flex flex-shrink-0">
                            <div class="footer-btn">
                                    <i class="fa fa-phone-alt fa-2x"></i>
                                    <div class="position-absolute" style="top: 2px; right: 12px;">
                                        <span><i class="fa fa-comment-dots text-secondary"></i></span>
                                    </div>
                                </a>
                            </div>
                            <div class="d-flex flex-column ms-3 flex-shrink-0">
                                <span>Gọi ngay cho chuyên gia</span>
                                <a href="tel:+0339 573 127"><span class="text-white">Miễn phí: +0835 731 781</span></a>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <!-- Footer End -->
    <!-- Copyright Start -->
    <div class="container-fluid copyright py-4">
        <div class="container">
            <div class="row g-4 align-items-center">
                <div class="col-md-6 text-center text-md-end mb-md-0">
                </div>
                <div class="col-md-6 text-center text-md-start text-body">
                    Bản Quyền Thiết Kế Bởi <span class="border-bottom text-white">Phòng Khám PhapLife</span>
                </div>
            </div>
        </div>
    </div>
    <!-- Copyright End -->
    <!-- Back to Top -->
    <a href="#" class="btn btn-danger btn-lg-square rounded-circle back-to-top"><i class="fa fa-arrow-up"></i></a>

    <!-- AI Chat Widget -->
    <style>
        .chat-fab {
            position: fixed;
            right: 20px;
            bottom: 20px;
            z-index: 1050;
        }

        .chat-panel {
            position: fixed;
            right: 20px;
            bottom: 90px;
            width: 320px;
            max-height: 420px;
            background: #ffffff;
            border: 1px solid #e5e7eb;
            border-radius: 16px;
            box-shadow: 0 12px 32px rgba(0, 0, 0, 0.16);
            display: none;
            flex-direction: column;
            overflow: hidden;
            z-index: 1050;
        }

        .chat-panel.open {
            display: flex;
        }

        .chat-header {
            padding: 12px 14px;
            background: linear-gradient(135deg, #2575fc, #6a11cb);
            color: #fff;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-messages {
            padding: 12px;
            overflow-y: auto;
            flex: 1;
            background: #f7f9fc;
        }

        .chat-msg {
            margin-bottom: 10px;
        }

        .chat-msg .from {
            display: inline-block;
            padding: 8px 10px;
            border-radius: 12px;
            max-width: 100%;
            white-space: pre-wrap;
        }

        .chat-msg.user .from {
            background: #e8f0ff;
            color: #1f2a44;
        }

        .chat-msg.bot .from {
            background: #ffffff;
            color: #111827;
            border: 1px solid #e5e7eb;
        }

        .chat-footer {
            padding: 10px;
            border-top: 1px solid #e5e7eb;
            background: #fff;
        }

        .chat-footer form {
            display: flex;
            gap: 8px;
        }

        .chat-footer input {
            flex: 1;
            border-radius: 10px;
            border: 1px solid #d1d5db;
            padding: 8px 10px;
        }

        .chat-footer button {
            border-radius: 10px;
        }

        .chat-hint {
            font-size: 12px;
            color: #6b7280;
            padding: 0 12px 8px;
        }
    </style>

    <div class="chat-fab">
        <button id="chat-toggle" class="btn btn-danger btn-lg-square rounded-circle"><i
                class="fa fa-comments"></i></button>
    </div>
    <div id="chat-panel" class="chat-panel">
        <div class="chat-header">
            <span>Trợ lý đặt lịch</span>
            <button id="chat-close" class="btn btn-sm btn-light text-dark">×</button>
        </div>
        <div class="chat-hint">Hỏi: "Xem lịch của tôi", "Danh sách bác sĩ".</div>
        <div id="chat-messages" class="chat-messages"></div>
        <div class="chat-footer">
            <form id="chat-form">
                <input id="chat-input" type="text" placeholder="Nhập câu hỏi..." autocomplete="off" required />
                <button type="submit" class="btn btn-primary">Gửi</button>
            </form>
        </div>
    </div>
    <script>
                // when animating on canvas, it is best to use requestAnimationFrame instead of setTimeout or setInterval
        // not supported in all browsers though and sometimes needs a prefix, so we need a shim
            return window.requestAnimationFrame ||
                        window.webkitRequestAnimationFrame ||
                        window.mozRequestAnimationFrame ||
                        };
        })();

        // now we will setup our basic variables for the demo
                // full screen dimensions
                cw = window.innerWidth,
                ch = window.innerHeight,
                // firework collection
                fireworks = [],
                // particle collection
                particles = [],
                // starting hue
                hue = 120,
                // when launching fireworks with a click, too many get launched at once without a limiter, one launch per 5 loop ticks
                limiterTotal = 20,
                limiterTick = 0,
                // this will time the auto launches of fireworks, one launch per 80 loop ticks
                timerTotal = 500,
                timerTick = 0,
                mousedown = false,
                // mouse x coordinate,
                mx,
                // mouse y coordinate
                my;


        // set canvas dimensions
        canvas.width = cw;
        canvas.height = ch;

        // now we are going to setup our function placeholders for the entire demo

        // get a random number within a range
        }

        // calculate the distance between two points
            var xDistance = p1x - p2x,
                    yDistance = p1y - p2y;
        }

        // create firework
            // actual coordinates
            this.x = sx;
            this.y = sy;
            // starting coordinates
            this.sx = sx;
            this.sy = sy;
            // target coordinates
            this.tx = tx;
            this.ty = ty;
            // distance from starting point to target
            this.distanceTraveled = 0;
            // track the past coordinates of each firework to create a trail effect, increase the coordinate count to create more prominent trails
            this.coordinates = [];
            this.coordinateCount = 3;
            // populate initial coordinate collection with the current coordinates
            }
            this.speed = 2;
            this.acceleration = 1.05;
            // circle target indicator radius
            this.targetRadius = 1;
        }

        // update firework
            // remove last item in coordinates array
            this.coordinates.pop();
            // add current coordinates to the start of the array

            // cycle the circle target indicator radius
                this.targetRadius += 0.3;
            } else {
                this.targetRadius = 1;
            }

            // speed up the firework
            this.speed *= this.acceleration;

            // get the current velocities based on angle and speed
            // how far will the firework have traveled with velocities applied?

            // if the distance traveled, including velocities, is greater than the initial distance to the target, then the target has been reached
                // remove the firework, use the index passed into the update function to determine which to remove
            } else {
                // target not reached, keep traveling
                this.x += vx;
                this.y += vy;
            }
        }

        // draw firework
            ctx.beginPath();
            // move to the last tracked coordinate in the set, then draw a line to the current x and y
            ctx.strokeStyle = 'hsl(' + hue + ', 100%, ' + this.brightness + '%)';
            ctx.stroke();

            ctx.beginPath();
            // draw the target for this firework with a pulsing circle
            //ctx.arc( this.tx, this.ty, this.targetRadius, 0, Math.PI * 2 );
            ctx.stroke();
        }

        // create particle
            this.x = x;
            this.y = y;
            // track the past coordinates of each particle to create a trail effect, increase the coordinate count to create more prominent trails
            this.coordinates = [];
            this.coordinateCount = 5;

            }
            // set a random angle in all possible directions, in radians
            // friction will slow the particle down
            this.friction = 0.95;
            // gravity will be applied and pull the particle down
            this.gravity = 0.6;
            // set the hue to a random number +-20 of the overall hue variable
            this.alpha = 1;
            // set how fast the particle fades out
        }

        // update particle
            // remove last item in coordinates array
            this.coordinates.pop();
            // add current coordinates to the start of the array
            // slow down the particle
            this.speed *= this.friction;
            // apply velocity
            // fade out the particle
            this.alpha -= this.decay;

            // remove the particle once the alpha is low enough, based on the passed in index
            }
        }

        // draw particle
            // move to the last tracked coordinates in the set, then draw a line to the current x and y
            ctx.strokeStyle = 'hsla(' + this.hue + ', 100%, ' + this.brightness + '%, ' + this.alpha + ')';

            ctx.stroke();
        }

        // create particle group/explosion
            // increase the particle count for a bigger explosion, beware of the canvas performance hit with the increased particles though
            var particleCount = 20;
            }
        }


        // main demo loop
        function loop() {
            // this function will run endlessly with requestAnimationFrame

            // increase the hue to get different colored fireworks over time
            hue += 0.5;

            // normally, clearRect() would be used to clear the canvas
            // we want to create a trailing effect though
            // setting the composite operation to destination-out will allow us to clear the canvas at a specific opacity, rather than wiping it entirely
            ctx.globalCompositeOperation = 'destination-out';
            // decrease the alpha property to create more prominent trails
            ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
            // change the composite operation back to our main mode
            // lighter creates bright highlight points as the fireworks and particles overlap each other
            ctx.globalCompositeOperation = 'lighter';

            // loop over each firework, draw it, update it
            var i = fireworks.length;
            }

            // loop over each particle, draw it, update it
            var i = particles.length;

            }


            // launch fireworks automatically to random coordinates, when the mouse isn't down
                timerTick = 0;
            } else {
                var temp = timerTick % 400;
                }

                var temp3 = temp / 10;

                }

                timerTick++;
            }

            // limit the rate at which fireworks get launched when mouse is down
                    // start the firework at the bottom middle of the screen, then set the current mouse coordinates as the target
                    limiterTick = 0;
                }
            } else {
                limiterTick++;
            }
        }

        // mouse event bindings
        // update the mouse coordinates on mousemove
            mx = e.pageX - canvas.offsetLeft;
            my = e.pageY - canvas.offsetTop;
        });

        // toggle mousedown state and prevent canvas from being selected
            e.preventDefault();
            mousedown = true;
        });

            e.preventDefault();
            mousedown = false;
        });

        // once the window loads, we are ready for some fireworks!
        window.onload = loop;
    </script>

    <!-- JavaScript Libraries -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/assets/lib/wow/wow.min.js"></script>
    <script src="~/assets/lib/easing/easing.min.js"></script>
    <script src="~/assets/lib/waypoints/waypoints.min.js"></script>
    <script src="~/assets/lib/counterup/counterup.min.js"></script>
    <script src="~/assets/lib/lightbox/js/lightbox.min.js"></script>
    <script src="~/assets/lib/owlcarousel/owl.carousel.min.js"></script>
    @* <script src="https://cdn.leanhduc.pro.vn/jquery/3.6.0.min.js"></script> *@
    @* <script src="https://cdn.leanhduc.pro.vn/utilities/multi-color-star-effects/main.js"></script> *@
    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <!-- Template Javascript -->
    <script src="~/assets/js/main.js"></script>
    <script>
        (function () {
            const panel = document.getElementById('chat-panel');
            const toggle = document.getElementById('chat-toggle');
            const closeBtn = document.getElementById('chat-close');
            const form = document.getElementById('chat-form');
            const input = document.getElementById('chat-input');
            const messages = document.getElementById('chat-messages');
            if (!panel || !toggle || !form) return;

            const append = (text, role) => {
                const wrap = document.createElement('div');
                wrap.className = `chat-msg ${role}`;
                const bubble = document.createElement('div');
                bubble.className = 'from';
                bubble.textContent = text;
                wrap.appendChild(bubble);
                messages.appendChild(wrap);
                messages.scrollTop = messages.scrollHeight;
            };

            const setSending = (sending) => {
                input.disabled = sending;
            };

            toggle.addEventListener('click', () => {
                panel.classList.add('open');
                input.focus();
            });

            closeBtn.addEventListener('click', () => {
                panel.classList.remove('open');
            });

            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                const text = input.value.trim();
                if (!text) return;
                append(text, 'user');
                input.value = '';
                setSending(true);
                try {
                    const res = await fetch('/api/chat', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ message: text })
                    });
                    const data = await res.json();
                    append(data.answer || 'Xin lỗi, mình chưa hiểu.', 'bot');
                } catch (err) {
                    append('Có lỗi kết nối, thử lại sau.', 'bot');
                } finally {
                    setSending(false);
                    input.focus();
                }
            });

            // Seed greeting
            append('Xin chào, mình có thể giúp bạn kiểm tra lịch, gợi ý bác sĩ hoặc đặt lịch.', 'bot');
        })();
    </script>
    @* @RenderSection("Scripts", required: false) *@
    @RenderSection("Styles", required: false)
</body>

</html>
